shell: |
  #export RUSTDOCFLAGS='-D warnings'
  env

  rustup default stable
  nix-shell

  cargo --version
  rustc --version

  cargo fmt --check
  #cargo clippy --all-targets --workspace -- --deny warnings
  cargo clippy --all-targets --workspace
  cargo build --all-targets --workspace
  cargo doc --workspace --no-deps --all-features
  cargo test --workspace --no-fail-fast
