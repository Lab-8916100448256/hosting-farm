{# This template receives a `users` list #}
<div id="user-search-results">
  {% if users and users|length > 0 %}
  <ul class="border border-gray-300 rounded-md mt-1 max-h-40 overflow-y-auto bg-white z-10 absolute w-full">
    {% for user in users %}
    <li 
      class="px-3 py-2 cursor-pointer hover:bg-indigo-100"
      hx-on:click="
        let input = document.getElementById('user_email');
        input.value = '{{ user.email }}';
        htmx.trigger('#user-search-results', 'htmx:remove');
        htmx.process(input); {# Trigger htmx processing if needed elsewhere #}
      "
    >
      {{ user.username }} ({{ user.email }})
    </li>
    {% endfor %}
  </ul>
  {% else %}
  {# Optionally show a 'no results' message or just clear the div #}
  {% endif %}
</div>
