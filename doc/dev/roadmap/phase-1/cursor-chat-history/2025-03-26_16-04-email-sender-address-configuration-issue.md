<!-- Generated by SpecStory -->

# Email Sender Address Configuration Issue (2025-03-26 17:04:19)

_**User**_

The team mailer is not setting the from address of the emails it is sending correctly. take example on how it is done in the auth mailer.

---

_**Assistant**_



---

Let me search for the mailer files in the codebase to compare the team and auth mailers.

---

<details>
            <summary>Grep search for "mailer" â€¢ **28** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///home/douzeb/gits/nixin/hosting-farm/.cursor/rules/rust.mdc` | L45 | `- To generate a new mailer use `cargo generate mailer`` |
| `file:///home/douzeb/gits/nixin/hosting-farm/tests/requests/auth.rs` | L46 | `let deliveries = ctx.mailer.unwrap().deliveries();` |
| `file:///home/douzeb/gits/nixin/hosting-farm/tests/requests/auth.rs` | L52 | `//     assert_debug_snapshot!(ctx.mailer.unwrap().deliveries());` |
| `file:///home/douzeb/gits/nixin/hosting-farm/tests/requests/auth.rs` | L240 | `let deliveries = ctx.mailer.unwrap().deliveries();` |
| `file:///home/douzeb/gits/nixin/hosting-farm/tests/requests/auth.rs` | L297 | `let deliveries = ctx.mailer.unwrap().deliveries();` |
| `file:///home/douzeb/gits/nixin/hosting-farm/config/development.yaml.example` | L22 | `# The UI hostname or IP address that mailers will point to.` |
| `file:///home/douzeb/gits/nixin/hosting-farm/config/development.yaml.example` | L45 | `# Mailer Configuration.` |
| `file:///home/douzeb/gits/nixin/hosting-farm/config/development.yaml.example` | L46 | `mailer:` |
| `file:///home/douzeb/gits/nixin/hosting-farm/config/development.yaml.example` | L47 | `# SMTP mailer configuration.` |
| `file:///home/douzeb/gits/nixin/hosting-farm/config/development.yaml.example` | L49 | `# Enable/Disable smtp mailer.` |
| `file:///home/douzeb/gits/nixin/hosting-farm/config/test.yaml` | L20 | `# The UI hostname or IP address that mailers will point to.` |
| `file:///home/douzeb/gits/nixin/hosting-farm/config/test.yaml` | L43 | `# Mailer Configuration.` |
| `file:///home/douzeb/gits/nixin/hosting-farm/config/test.yaml` | L44 | `mailer:` |
| `file:///home/douzeb/gits/nixin/hosting-farm/config/test.yaml` | L46 | `# SMTP mailer configuration.` |
| `file:///home/douzeb/gits/nixin/hosting-farm/config/test.yaml` | L48 | `# Enable/Disable smtp mailer.` |
| `file:///home/douzeb/gits/nixin/hosting-farm/config/test.yaml.example` | L20 | `# The UI hostname or IP address that mailers will point to.` |
| `file:///home/douzeb/gits/nixin/hosting-farm/config/test.yaml.example` | L43 | `# Mailer Configuration.` |
| `file:///home/douzeb/gits/nixin/hosting-farm/config/test.yaml.example` | L44 | `mailer:` |
| `file:///home/douzeb/gits/nixin/hosting-farm/config/test.yaml.example` | L46 | `# SMTP mailer configuration.` |
| `file:///home/douzeb/gits/nixin/hosting-farm/config/test.yaml.example` | L48 | `# Enable/Disable smtp mailer.` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/team.rs` | L15 | `static invitation: Dir<'_> = include_dir!("src/mailers/team/invitation");` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/team.rs` | L17 | `pub struct TeamMailer {}` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/team.rs` | L18 | `impl Mailer for TeamMailer {}` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/team.rs` | L20 | `impl TeamMailer {` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/team.rs` | L43 | `// Check if mailer is configured` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/team.rs` | L44 | `if ctx.mailer.is_none() {` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/team.rs` | L45 | `tracing::warn!("Mailer not configured, skipping email delivery to {}", invited_email);` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/team.rs` | L52 | `mailer::Args {` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/auth.rs` | Lundefined | `// auth mailer` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/auth.rs` | L8 | `static welcome: Dir<'_> = include_dir!("src/mailers/auth/welcome");` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/auth.rs` | L9 | `static forgot: Dir<'_> = include_dir!("src/mailers/auth/forgot");` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/auth.rs` | L10 | `static magic_link: Dir<'_> = include_dir!("src/mailers/auth/magic_link");` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/auth.rs` | L11 | `// #[derive(Mailer)] // -- disabled for faster build speed. it works. but lets` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/auth.rs` | L15 | `pub struct AuthMailer {}` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/auth.rs` | L16 | `impl Mailer for AuthMailer {}` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/auth.rs` | L17 | `impl AuthMailer {` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/auth.rs` | L24 | `let mut args = mailer::Args {` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/auth.rs` | L36 | `if let Some(mailer_config) = &ctx.config.mailer {` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/auth.rs` | L37 | `if let Some(smtp_config) = &mailer_config.smtp {` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/auth.rs` | L55 | `let mut args = mailer::Args {` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/auth.rs` | L67 | `if let Some(mailer_config) = &ctx.config.mailer {` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/auth.rs` | L68 | `if let Some(smtp_config) = &mailer_config.smtp {` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/auth.rs` | L86 | `let mut args = mailer::Args {` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/auth.rs` | L100 | `if let Some(mailer_config) = &ctx.config.mailer {` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/auth.rs` | L101 | `if let Some(smtp_config) = &mailer_config.smtp {` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/controllers/teams.rs` | L6 | `mailers::team::TeamMailer,` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/controllers/teams.rs` | L183 | `TeamMailer::send_invitation(&ctx, &user, &team, &invitation).await?;` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/controllers/teams_pages.rs` | L659 | `// Send invitation email using the TeamMailer` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/controllers/teams_pages.rs` | L660 | `crate::mailers::team::TeamMailer::send_invitation(&ctx, &invited_user, &team, &invitation).await?;` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/controllers/auth_pages.rs` | L4 | `mailers::auth::AuthMailer,` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/controllers/auth_pages.rs` | L75 | `AuthMailer::send_welcome(&ctx, &user).await?;` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/controllers/auth.rs` | L1 | `mailers::auth::AuthMailer,` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/controllers/auth.rs` | L66 | `AuthMailer::send_welcome(&ctx, &user).await?;` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/controllers/auth.rs` | L108 | `AuthMailer::forgot_password(&ctx, &user).await?;` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/controllers/auth.rs` | L191 | `AuthMailer::send_magic_link(&ctx, &user).await?;` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/lib.rs` | L3 | `pub mod mailers;` |
| `file:///home/douzeb/gits/nixin/hosting-farm/doc/dev/roadmap/phase-1/cursor-chat-history/2025-03-26_12-57-profile-page-feature-implementation.md` | L664 | `--> src/mailers/team.rs:16:8` |
| `file:///home/douzeb/gits/nixin/hosting-farm/doc/dev/roadmap/phase-1/cursor-chat-history/2025-03-26_12-57-profile-page-feature-implementation.md` | L666 | `16 | static invitation: Dir<'_> = include_dir!("src/mailers/team/invitation");` |
| `file:///home/douzeb/gits/nixin/hosting-farm/doc/dev/roadmap/phase-1/cursor-chat-history/2025-03-26_13-41-team-deletion-and-redirection-in-rust.md` | L323 | `--> src/mailers/team.rs:16:8` |
| `file:///home/douzeb/gits/nixin/hosting-farm/doc/dev/roadmap/phase-1/cursor-chat-history/2025-03-26_13-41-team-deletion-and-redirection-in-rust.md` | L325 | `16 | static invitation: Dir<'_> = include_dir!("src/mailers/team/invitation");` |
| `file:///home/douzeb/gits/nixin/hosting-farm/doc/dev/roadmap/phase-1/cursor-chat-history/2025-03-26_13-41-team-deletion-and-redirection-in-rust.md` | L428 | `--> src/mailers/team.rs:16:8` |
| `file:///home/douzeb/gits/nixin/hosting-farm/doc/dev/roadmap/phase-1/cursor-chat-history/2025-03-26_13-41-team-deletion-and-redirection-in-rust.md` | L430 | `16 | static invitation: Dir<'_> = include_dir!("src/mailers/team/invitation");` |
| `file:///home/douzeb/gits/nixin/hosting-farm/doc/dev/roadmap/phase-1/cursor-chat-history/2025-03-23_21-25-sign-out-menu-not-functioning.md` | L403 | `--> src/mailers/team.rs:16:8` |
| `file:///home/douzeb/gits/nixin/hosting-farm/doc/dev/roadmap/phase-1/cursor-chat-history/2025-03-23_21-25-sign-out-menu-not-functioning.md` | L405 | `16 | static invitation: Dir<'_> = include_dir!("src/mailers/team/invitation");` |
| `file:///home/douzeb/gits/nixin/hosting-farm/doc/dev/roadmap/phase-1/cursor-chat-history/2025-03-26_13-56-fixing-non-functional-front-end-features.md` | L451 | `+             AuthMailer::send_password_reset(&ctx, &user).await?;` |
| `file:///home/douzeb/gits/nixin/hosting-farm/doc/dev/roadmap/phase-1/cursor-chat-history/2025-03-26_13-56-fixing-non-functional-front-end-features.md` | L636 | `+     if let Err(e) = crate::mailers::team::TeamMailer::send_invitation(&ctx, &user, &team, &invitation).await {` |
| `file:///home/douzeb/gits/nixin/hosting-farm/doc/dev/roadmap/phase-1/cursor-chat-history/2025-03-25_20-16-team-creation-issue-and-rust-rules.md` | L266 | `--> src/mailers/team.rs:16:8` |
| `file:///home/douzeb/gits/nixin/hosting-farm/doc/dev/roadmap/phase-1/cursor-chat-history/2025-03-25_20-16-team-creation-issue-and-rust-rules.md` | L268 | `16 | static invitation: Dir<'_> = include_dir!("src/mailers/team/invitation");` |
| `file:///home/douzeb/gits/nixin/hosting-farm/doc/dev/roadmap/phase-1/cursor-chat-history/2025-03-26_14-48-implementing-missing-front-end-features-in-rust.md` | L1106 | `--> src/mailers/team.rs:16:8` |
| `file:///home/douzeb/gits/nixin/hosting-farm/doc/dev/roadmap/phase-1/cursor-chat-history/2025-03-26_14-48-implementing-missing-front-end-features-in-rust.md` | L1108 | `16 | static invitation: Dir<'_> = include_dir!("src/mailers/team/invitation");` |
| `file:///home/douzeb/gits/nixin/hosting-farm/doc/dev/roadmap/phase-1/cursor-chat-history/2025-03-23_21-25-removing-unused-client-side-frontend.md` | L135 | `| `src/mailers/auth.rs` | L1-72 |` |
| `file:///home/douzeb/gits/nixin/hosting-farm/doc/dev/roadmap/phase-1/cursor-chat-history/2025-03-23_21-25-removing-unused-client-side-frontend.md` | L171 | `| `src/mailers/auth.rs` | L1-72 |` |
| `file:///home/douzeb/gits/nixin/hosting-farm/doc/dev/roadmap/phase-1/cursor-chat-history/2025-03-23_21-25-removing-unused-client-side-frontend.md` | L210 | `| `src/mailers/auth.rs` | L1-72 |` |
| `file:///home/douzeb/gits/nixin/hosting-farm/doc/dev/roadmap/phase-1/cursor-chat-history/2025-03-23_21-25-removing-unused-client-side-frontend.md` | L243 | `| `src/mailers/auth.rs` | L1-72 |` |
| `file:///home/douzeb/gits/nixin/hosting-farm/doc/dev/roadmap/phase-1/cursor-chat-history/2025-03-26_10-47-teams-page-issue-report.md` | L123 | `| ðŸ“ `mailers` |` |
| `file:///home/douzeb/gits/nixin/hosting-farm/doc/dev/roadmap/phase-1/cursor-chat-history/2025-03-25_18-48-fixing-create-team-button-error.md` | L124 | `| ðŸ“ `mailers` |` |
| `file:///home/douzeb/gits/nixin/hosting-farm/doc/dev/roadmap/phase-1/cursor-chat-history/2025-03-25_18-48-fixing-create-team-button-error.md` | L621 | `--> src/mailers/team.rs:16:8` |
| `file:///home/douzeb/gits/nixin/hosting-farm/doc/dev/roadmap/phase-1/cursor-chat-history/2025-03-25_18-48-fixing-create-team-button-error.md` | L623 | `16 | static invitation: Dir<'_> = include_dir!("src/mailers/team/invitation");` |
| `file:///home/douzeb/gits/nixin/hosting-farm/doc/dev/roadmap/phase-1/cursor-chat-history/2025-03-25_20-03-team-page-create-button-issue.md` | L273 | `--> src/mailers/team.rs:16:8` |
| `file:///home/douzeb/gits/nixin/hosting-farm/doc/dev/roadmap/phase-1/cursor-chat-history/2025-03-25_20-03-team-page-create-button-issue.md` | L275 | `16 | static invitation: Dir<'_> = include_dir!("src/mailers/team/invitation");` |
| `file:///home/douzeb/gits/nixin/hosting-farm/doc/dev/roadmap/phase-1/cursor-chat-history/2025-03-25_12-41-authentication-token-handling-issue.md` | L998 | `--> src/mailers/team.rs:16:8` |
| `file:///home/douzeb/gits/nixin/hosting-farm/doc/dev/roadmap/phase-1/cursor-chat-history/2025-03-25_12-41-authentication-token-handling-issue.md` | L1000 | `16 | static invitation: Dir<'_> = include_dir!("src/mailers/team/invitation");` |
| `file:///home/douzeb/gits/nixin/hosting-farm/doc/dev/roadmap/phase-1/cursor-chat-history/2025-03-25_12-41-authentication-token-handling-issue.md` | L1126 | `--> src/mailers/team.rs:16:8` |
| `file:///home/douzeb/gits/nixin/hosting-farm/doc/dev/roadmap/phase-1/cursor-chat-history/2025-03-25_12-41-authentication-token-handling-issue.md` | L1128 | `16 | static invitation: Dir<'_> = include_dir!("src/mailers/team/invitation");` |
| `file:///home/douzeb/gits/nixin/hosting-farm/doc/dev/roadmap/phase-1/cursor-chat-history/2025-03-25_12-41-authentication-token-handling-issue.md` | L1315 | `--> src/mailers/team.rs:16:8` |
| `file:///home/douzeb/gits/nixin/hosting-farm/doc/dev/roadmap/phase-1/cursor-chat-history/2025-03-25_12-41-authentication-token-handling-issue.md` | L1317 | `16 | static invitation: Dir<'_> = include_dir!("src/mailers/team/invitation");` |
| `file:///home/douzeb/gits/nixin/hosting-farm/doc/dev/roadmap/phase-1/cursor-chat-history/2025-03-25_12-41-authentication-token-handling-issue.md` | L1509 | `--> src/mailers/team.rs:16:8` |
| `file:///home/douzeb/gits/nixin/hosting-farm/doc/dev/roadmap/phase-1/cursor-chat-history/2025-03-25_12-41-authentication-token-handling-issue.md` | L1511 | `16 | static invitation: Dir<'_> = include_dir!("src/mailers/team/invitation");` |
| `file:///home/douzeb/gits/nixin/hosting-farm/doc/dev/roadmap/phase-1/cursor-chat-history/2025-03-25_22-38-team-creation-error-troubleshooting.md` | L343 | `--> src/mailers/team.rs:16:8` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/controllers/teams.rs` | L6 | `mailers::team::TeamMailer,` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/controllers/teams.rs` | L183 | `TeamMailer::send_invitation(&ctx, &user, &team, &invitation).await?;` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/controllers/teams_pages.rs` | L659 | `// Send invitation email using the TeamMailer` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/controllers/teams_pages.rs` | L660 | `crate::mailers::team::TeamMailer::send_invitation(&ctx, &invited_user, &team, &invitation).await?;` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/team.rs` | L15 | `static invitation: Dir<'_> = include_dir!("src/mailers/team/invitation");` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/team.rs` | L17 | `pub struct TeamMailer {}` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/team.rs` | L18 | `impl Mailer for TeamMailer {}` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/team.rs` | L20 | `impl TeamMailer {` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/team.rs` | L43 | `// Check if mailer is configured` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/team.rs` | L44 | `if ctx.mailer.is_none() {` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/team.rs` | L45 | `tracing::warn!("Mailer not configured, skipping email delivery to {}", invited_email);` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/team.rs` | L52 | `mailer::Args {` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/auth.rs` | Lundefined | `// auth mailer` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/auth.rs` | L8 | `static welcome: Dir<'_> = include_dir!("src/mailers/auth/welcome");` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/auth.rs` | L9 | `static forgot: Dir<'_> = include_dir!("src/mailers/auth/forgot");` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/auth.rs` | L10 | `static magic_link: Dir<'_> = include_dir!("src/mailers/auth/magic_link");` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/auth.rs` | L11 | `// #[derive(Mailer)] // -- disabled for faster build speed. it works. but lets` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/auth.rs` | L15 | `pub struct AuthMailer {}` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/auth.rs` | L16 | `impl Mailer for AuthMailer {}` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/auth.rs` | L17 | `impl AuthMailer {` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/auth.rs` | L24 | `let mut args = mailer::Args {` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/auth.rs` | L36 | `if let Some(mailer_config) = &ctx.config.mailer {` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/auth.rs` | L37 | `if let Some(smtp_config) = &mailer_config.smtp {` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/auth.rs` | L55 | `let mut args = mailer::Args {` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/auth.rs` | L67 | `if let Some(mailer_config) = &ctx.config.mailer {` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/auth.rs` | L68 | `if let Some(smtp_config) = &mailer_config.smtp {` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/auth.rs` | L86 | `let mut args = mailer::Args {` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/auth.rs` | L100 | `if let Some(mailer_config) = &ctx.config.mailer {` |
| `file:///home/douzeb/gits/nixin/hosting-farm/src/mailers/auth.rs` | L101 | `if let Some(smtp_config) = &mailer_config.smtp {` |

</details>

---

Now I'll check the auth mailer implementation to see how it sets the from address:

---

Read file: src/mailers/auth.rs

---

Now let me check the team mailer implementation:

---

Read file: src/mailers/team.rs

---

I can now see the issue. In the `auth.rs` mailer, there is code to set the `from` address in the `mailer::Args` structure:

```rust
let mut args = mailer::Args {
    to: user.email.to_string(),
    locals: json!({
      // Local variables
    }),
    from: Some("test@example.com".to_string()),
    ..Default::default()
};

// Set the from email to match the SMTP username if available
if let Some(mailer_config) = &ctx.config.mailer {
    if let Some(smtp_config) = &mailer_config.smtp {
        if let Some(auth) = &smtp_config.auth {
            args.from = Some(auth.user.clone());
        }
    }
}
```

However, in the `team.rs` mailer, the `from` address is not set at all in the `mailer::Args` structure:

```rust
mailer::Args {
    to: invited_email.clone(),
    locals,
    ..Default::default()
}
```

Let me update the team mailer to set the from address correctly:

---

```diff
              return Ok(());
          }
+ 
+         let mut args = mailer::Args {
+             to: invited_email.clone(),
+             locals,
+             from: Some("test@example.com".to_string()),
+             ..Default::default()
+         };
+         
+         // Set the from email to match the SMTP username if available
+         if let Some(mailer_config) = &ctx.config.mailer {
+             if let Some(smtp_config) = &mailer_config.smtp {
+                 if let Some(auth) = &smtp_config.auth {
+                     args.from = Some(auth.user.clone());
+                 }
+             }
+         }
  
          match Self::mail_template(
              ctx, 
              &invitation,
-             mailer::Args {
-                 to: invited_email.clone(),
-                 locals,
-                 ..Default::default()
-             },
+             args,
          ).await {
              Ok(_) => {
```

---

I've updated the team mailer to properly set the "from" address in emails. The change includes:

1. Created a `mut args` structure with default email "test@example.com"
2. Added logic to update the "from" address with the SMTP username if available in config
3. Used this args structure in the `mail_template` call

This matches the pattern used in the auth mailer and should fix the issue with the team mailer not setting the correct from address in emails.

---



---

